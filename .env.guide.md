# Environment Variables Guide - Solo Dev Setup

## Your Active .env Files

```
YandY/
├── backend/
│   ├── .env.local    ← Docker development (currently using this)
│   └── .env.host     ← Non-Docker development (DB on localhost)
└── frontend/
    └── .env.local    ← Development (points to localhost:8000)
```

## Which One Do I Use?

### Running with Docker Compose (Recommended)
**Backend uses**: `backend/.env.local`
- Database Host: `postgres` (Docker container name)
- Redis Host: `redis` (Docker container name)

**Frontend uses**: `frontend/.env.local`
- API URL: `http://localhost:8000`

**Start it**:
```bash
docker-compose up -d
```

---

### Running without Docker (Backend on host)
**Backend uses**: `backend/.env.host`
- Database Host: `localhost` (your PostgreSQL on host)
- Redis Host: `localhost` (your Redis on host)

**Frontend uses**: `frontend/.env.local` (same as Docker)

**Start it**:
```bash
# Terminal 1 - Backend
cd backend
npm run dev

# Terminal 2 - Frontend
cd frontend
npm run dev
```

---

## Production (Render)

**Don't use .env files!**

Environment variables are set in Render dashboard:
- Go to your service → Environment tab
- Add each variable manually

**Required variables for production**:
- `DATABASE_URL` - Your Render PostgreSQL URL
- `REDIS_URL` - Your Render Redis URL
- `JWT_SECRET` - Strong random secret
- `JWT_REFRESH_SECRET` - Different strong secret
- `FRONTEND_URL` - Your production domain
- (Optional) Twilio vars if using SMS

---

## Quick Reference

### Backend Environment Variables

**Database** (PostgreSQL via Prisma):
- `DATABASE_URL` - Full connection string
- `DB_HOST`, `DB_PORT`, `DB_NAME`, `DB_USER`, `DB_PASSWORD` - Docker Compose uses these

**Cache** (Redis):
- `REDIS_URL` - Full connection string
- `REDIS_PASSWORD` - Redis password

**Auth** (JWT):
- `JWT_SECRET` - Access token secret
- `JWT_REFRESH_SECRET` - Refresh token secret
- `JWT_ACCESS_EXPIRY` - Default: 15m
- `JWT_REFRESH_EXPIRY` - Default: 7d

**Twilio** (SMS - optional for local dev):
- `TWILIO_ACCOUNT_SID`
- `TWILIO_AUTH_TOKEN`
- `TWILIO_PHONE_NUMBER`

**Server**:
- `PORT` - Default: 8000
- `NODE_ENV` - development | production
- `FRONTEND_URL` - For CORS

---

### Frontend Environment Variables

**All frontend vars start with `VITE_`** (Vite requirement)

**API**:
- `VITE_API_URL` - Backend URL (http://localhost:8000 for dev)

**Business Info**:
- Phone, address, social media links
- See `frontend/.env.local` for full list

**Feature Flags**:
- `VITE_FEATURE_BOOKING` - Enable/disable booking
- `VITE_MAINTENANCE_MODE` - Show maintenance page

---

## Common Tasks

### Change Database Password
1. Update `backend/.env.local` (or `.env.host`)
2. Update `docker-compose.yml` if using Docker
3. Restart: `docker-compose restart`

### Point Frontend to Different Backend
```bash
# Edit frontend/.env.local
VITE_API_URL=http://different-backend:8000
```

### Add New Environment Variable
1. Add to appropriate `.env.local` or `.env.host`
2. Restart the service
3. Access in code:
   - Backend: `process.env.VARIABLE_NAME`
   - Frontend: `import.meta.env.VITE_VARIABLE_NAME`

---

## Security Notes

✅ **These files are git-ignored** - Never committed
✅ **Production uses Render dashboard** - No .env files in production
✅ **Secrets are different per environment** - Dev secrets ≠ Prod secrets

❌ **Never commit .env files** - Already in .gitignore
❌ **Never use dev secrets in production** - Generate new ones
❌ **Never share .env files** - Contains secrets

---

## Need Help?

- Backend won't start? Check `DATABASE_URL` in `backend/.env.local`
- Frontend can't reach API? Check `VITE_API_URL` in `frontend/.env.local`
- Docker issues? Use `backend/.env.local` (not `.env.host`)
- Running on host? Use `backend/.env.host` (not `.env.local`)
